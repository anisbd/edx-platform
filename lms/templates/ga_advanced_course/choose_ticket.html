<%inherit file="../main.html" />
<%namespace name='static' file='/static_content.html'/>

<%!
from django.core.urlresolvers import reverse
from django.utils.translation import ugettext as _
from openedx.core.lib.ga_datetime_utils import to_timezone
%>

<%block name="pagetitle">${_("Ticket Option")}</%block>

<%block name="bodyclass">ticket option</%block>

<div class="ticket_page_wrap">
  <h2>${_("Ticket Option")}</h2>

  % if messages:
  <div class="purchase_error">
    % for message in messages:
    <p>${message}</p>
    % endfor
  </div>
  % endif

  <h3>${advanced_course.display_name | h}</h3>
  <section class="section">
    <div class="course_select_area clear">
      <p>${_("When you select a purchase ticket from below, and go to the settlement site (credit card, corresponding to DoCoMo Mobile Payment)")}</p>
    </div>
    <div class="item_area clear">
      % for ticket in tickets:
      <div class="items">
        <h4>${ticket.display_name | h}</h4>
        <p>${ticket.description | h}</p>
        % if ticket.is_end_of_sale():
        <span class="t_btn disabled">${_("End of sale")}</span>
        % else:
        <a href="${reverse('advanced_course:purchase_ticket', args=[course_id, ticket.id])}" class="t_btn apply">Â¥${'{:,d}'.format(ticket.price_with_tax)}</a>
        % endif
        <p class="sell_by_date">${_("Sell-by date")} ${to_timezone(ticket.sell_by_date).strftime('%Y/%m/%d %H:%M')}</p>
      </div>
      % endfor
    </div>
    <p class="purchase_annotation">${_("* Display price will be tax included.")}</p>
  </section>
</div>
